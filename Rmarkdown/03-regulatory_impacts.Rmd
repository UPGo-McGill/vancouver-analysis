---
title: "Short-term Rentals in Vancouver"
subtitle: "Market Overview and Regulatory Impact Analysis"
author: "David Wachsmuth, Maxime Bélanger De Blois and Cloé St-Hilaire"
date: "`r format(Sys.time(), '%d %B %Y')`"
output: 
  bookdown::html_document2:
    toc: yes
    fig_caption: yes
---

<style type="text/css">
  body{
  font-family: Futura, Helvetica, Arial;
}
</style>

<br>

---

# Short-term rentals in the City of Vancouver: Regulatory impacts

```{r setup, include = FALSE, echo = FALSE}

library(here)
source(here("R", "01_startup.R"))

knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(include = FALSE)
knitr::opts_chunk$set(message = FALSE)
knitr::opts_chunk$set(warning = FALSE)

# Function for checking file modifications
mtime <- function(files) lapply(Sys.glob(files), function(x) file.info(x)$mtime)

# Set this to TRUE to output PDF figures
build_figures <- TRUE

```

```{r new_objects, cache = TRUE, cache.lazy = FALSE, cache.extra = mtime(here("output", "str_processed.qsm"))}

qload(here("output", "str_processed.qsm"), nthreads = availableCores())
qload(here("output", "geometry.qsm"), nthreads = availableCores())

displayed_listings <-
  daily %>% 
  filter(housing) %>% 
  count(date, blocked = status == "B") %>% 
  group_by(blocked) %>% 
  mutate(n = slide_dbl(n, mean, .before = 6, .complete = TRUE)) %>% 
  ungroup() %>% 
  drop_na() %>% 
  group_by(date) %>% 
  mutate(n = if_else(blocked == TRUE, sum(n), n)) %>% 
  ungroup() %>% 
  mutate(blocked = if_else(blocked == TRUE, "Displayed listings", 
                           "Active listings"))

active_listings <- 
  daily %>% 
  filter(housing, status != "B") %>% 
  count(date, listing_type) %>% 
  group_by(listing_type) %>% 
  mutate(n = slide_dbl(n, mean, .before = 6, .complete = TRUE)) %>% 
  ungroup()

active_listings <- 
  daily %>% 
  filter(housing, status != "B") %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 6, .complete = TRUE),
         listing_type = "All listings") %>% 
  bind_rows(active_listings) %>% 
  arrange(date, listing_type)

rm(property, daily, GH, CMA, DA, city, BL, BL_expanded, skytrain)

```

```{r exec_summ, cache = TRUE, cache.lazy = FALSE, cache.extra = mtime(here("output", "str_processed.qsm"))}

# qload(here("output", "str_processed.qsm"), nthreads = availableCores())


rm(property, daily, GH)

```

**Regulations in the City of Vancouver came to effect on April 18th of 2018, and started to get enforced at the beginning of September. For operators, the new short-term rental by-law implied the acquisition of a business licence as well as restrictions in location of operation and length of availability. The regulation caused a significant decline in active listings the months following, but rebounded the following summer of 2019. The number of commercial listings also reached pre-regulation levels in the summer season. Compared to other geographies, however, STR growth in the City of Vancouver has been of lesser proportions. While daily active listings declined by 2.4% in 2019 (compared to 2018), they increased by 21.9% in the rest of the CMA. While reservations and revenue increased by 5.2% and 2.6% respectively in the City of Vancouver in 2019, they increased by 35.9% and 35.0% in the rest of the CMA. Taking a closer look at properties on both sides of the Vancouver-Burnaby border, we can see that, although there has been a great increase in the number of active listings on the Burnaby side of the border, it has not come with a subsequent increase in revenue nor reservations. This oversupply of listings on the Burnaby side was not accompanied by a rise in demand.**

<br>

## The City of Vancouver's STR regulations

In April 2018, the City of Vancouver enacted regulations on the operations of short-term rentals in the City, definied as rentals offered for thirty or fewer consecutive days (City of Vancouver, 2020a). Under these regulations, each STR operator is required to obtain a license for their rental unit; these licenses are only issued for STRs operated out of a host’s principal residence, and are valid for a single calendar year. Licensed listings can either be the entire principal residence or individual rooms within the residence. Although the regulations apply to STRs listed on any platform, Airbnb is the only STR platform that agreed to require hosts in Vancouver to fill out a license field in their online listing, to engage in data sharing, and to undertake operator education (City of Vancouver, 2020b). In August 2018, shortly before the City's announced start date for enforcement of the registration system, Airbnb removed approximately 2,400 listings which had not received licenses.

The regulations put in place by the City significantly constrain the type of STRs which are permitted to be operated in Vancouver. In particular, what we define as "multilistings" (listings operated by hosts who are simultaneously operating other listings) are by definition non-compliant, since multiple different listings cannot be simultaneously operated out of a principal residence. Moreover, frequently rented entire-home (FREH) listings are also highly likely to be non-compliant, since listings which are operated the majority of the year would be unlikely to also be a valid principal residence (excepting rare cases of very frequent travellers, for example).

In what follows we assemble evidence about the of the City's regulations on the STR market. Given the significant restraints which the regulations impose on the market, their impacts should be highly visible if the regulations have been effective. If, by contrast, few impacts can be discerned, that implies that the regulations have not been effective. We carry out this task by analyzing the trajectory of STR activity in the City of Vancouver over time, and by comparing the City with a set of peer jurisdictions. This analysis collectively demonstrates that the City’s STR regulations have been effective at reducing STR activity and growth in Vancouver, and have accomplished that reduction in part by driving incoming visits to other municipalities within Metro Vancouver. However, the most significant impacts of the regulations were relatively short lived: both total active listings and commercial listings returned to pre-regulation levels within a year of the regulations being implemented. 

## The trajectory of post-regulation STR activity in Vancouver

```{r trajectory, cache = TRUE, cache.lazy = FALSE, cache.extra = mtime(here("output", "str_processed.qsm"))}

# Drop in displayed listings
displayed_drop <- 
  displayed_listings %>% 
  filter(date >= "2018-08-20", date <= "2018-09-07") %>% 
  group_by(blocked) %>% 
  summarize(decline = 1 - min(n) / max(n)) %>% 
  filter(blocked == "Displayed listings") %>% 
  pull(decline) %>% 
  scales::percent(0.1)

# Drop in active listings
active_drop <- 
  displayed_listings %>% 
  filter(date >= "2018-08-20", date <= "2018-09-07") %>% 
  group_by(blocked) %>% 
  summarize(decline = 1 - min(n) / max(n)) %>% 
  filter(blocked == "Active listings") %>% 
  pull(decline) %>% 
  scales::percent(0.1)

```

``` {r make_fig_3_1}

figure_3_1_fun <- function(regular = "", condensed = "") {
  
  displayed_listings %>% 
    ggplot(aes(date, n, colour = blocked)) +
    annotate("segment", x = key_date_covid, xend = key_date_covid,
             y = -Inf, yend = Inf, alpha = 0.3) +
    annotate("segment", x = key_date_regulations, xend = key_date_regulations,
             y = -Inf, yend = Inf, alpha = 0.3) +
    geom_line(lwd = 1.5) +
    scale_y_continuous(name = NULL, label = scales::comma) +
    scale_x_date(name = NULL, limits = c(as.Date("2016-01-01"), NA)) +
    scale_colour_manual(name = NULL, values = col_palette[c(5, 1:3)]) +
    theme_minimal() +
    theme(legend.position = "bottom", panel.grid.minor.x = element_blank(),
          text = element_text(family = regular))

}

if (build_figures) {
  ggsave(here("output", "figures", "figure_3_1.pdf"), 
         plot = figure_3_1_fun("Futura", "Futura Condensed"), 
         width = 8, height = 5, units = "in", useDingbats = FALSE)
  
  extrafont::embed_fonts(here("output", "figures", "figure_3_1.pdf"))
}

```

The impact of the City's regulations can be directly measured in two ways: changes in the total number of listings on STR platforms in Vancouver, and changes in commercial listings which are highly likely to be non-compliant. Because all Vancouver STR listings are required to be licensed whether or not they are active, in Figure \@ref(fig:fig-3-1) we show the total number of listings displayed each day alongside our standard metric of active daily listings. Displayed listings comprise active listings (i.e. listings which are either reserved or available for reservation) and inactive (blocked) listings which are visible on Airbnb or VRBO. Both indicators show a sharp drop following Airbnb's mass removal of non-licensed listings in August 2018, but the decline is proportionally twice as large for displayed listings, which decreased `r displayed_drop` from August 20 to September 7, as it is for active listings, which decreased `r active_drop` over the same date range. Furthermore, displayed listings have never come close to regaining their pre-regulation numbers in Vancouver, while active listings had mostly recovered by the summer of 2019, a year after Airbnb's mass removal. Put differently, a disproportionate share of the large decline in STRs which followed Airbnb's mass removal was listings which were not actually in use on the platform anymore.

``` {r fig-3-1, include = TRUE, fig.cap = '(ref:fig-3-1)', fig.align = "center"}

figure_3_1_fun()

```

(ref:fig-3-1) _Displayed and active listings in the City of Vancouver (7-day average)_

```{r active_trend, cache = TRUE, cache.lazy = FALSE, cache.extra = mtime(here("output", "str_processed.qsm"))}

qload(here("output", "str_processed.qsm"), nthreads = availableCores())
library(feasts)
library(fabletools)

# Get seasonal trend components
active_components <- 
  daily %>% 
  filter(housing, status != "B") %>% 
  count(date) %>% 
  tsibble::as_tsibble() %>% 
  tsibble::index_by(yearmon = tsibble::yearmonth(date)) %>% 
  summarize(n = sum(n, na.rm = TRUE)) %>% 
  filter(yearmon >= tsibble::yearmonth("2015-04")) %>%
  filter(yearmon <= tsibble::yearmonth("2018-03")) %>%
  model(x11 = feasts:::X11(n, type = "additive")) %>% 
  components()

# Get linear trend from last two years
active_linear_coefficients <- 
  active_components %>% 
  filter(yearmon >= tsibble::yearmonth("2016-04")) %>% 
  mutate(id = 1:24) %>% 
  lm(trend ~ id, data = .) %>% 
  `$`("coefficients")

# Get seasonal component from April
active_seasonal <- 
  active_components %>% 
  filter(yearmon >= tsibble::yearmonth("2016-04")) %>% 
  mutate(month = lubridate::month(yearmon)) %>% 
  slice_tail(n = 12) %>% 
  as_tibble() %>% 
  select(month, seasonal)

# Set number of months to project out
months_to_project <- 21

# Build monthly projections
active_monthly_projection <-
  tibble(
    id = 24 + seq_len(months_to_project),
    yearmon = seq(tsibble::yearmonth("2018-04"), length.out = months_to_project, 
                  by = 1),
    month = lubridate::month(yearmon),
    trend_growth = 
      active_linear_coefficients[[1]] + id * active_linear_coefficients[[2]],
    trend_no_growth = 
      active_linear_coefficients[[1]] + 24 * active_linear_coefficients[[2]]
  ) %>% 
  left_join(active_seasonal, by = "month") %>% 
  mutate(projected_growth = trend_growth + seasonal,
         projected_no_growth = trend_no_growth + seasonal)

# Convert to daily values for month midpoints
active_daily_projection <-
  active_monthly_projection %>% 
  mutate(days = days_in_month(month),
         date = as.Date(yearmon) + 15,
         projected_growth = round(projected_growth / days),
         projected_no_growth = round(projected_no_growth / days)) %>% 
  select(date, projected_growth, projected_no_growth)

# Integrate into actual data
active_listings_trend <- 
  daily %>% 
  filter(housing, status != "B") %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 6)) %>% 
  filter(date >= "2016-01-01") %>% 
  left_join(active_daily_projection) %>% 
  mutate(projected_growth = if_else(date == "2018-04-01", n, projected_growth),
         projected_no_growth = if_else(date == "2018-04-01", 
                                       n, projected_no_growth)) %>%
  filter(date >= "2018-04-01", date <= "2019-12-16") %>%
  mutate(projected_growth = zoo::na.approx(projected_growth),
         projected_no_growth = zoo::na.approx(projected_no_growth))

# Rbind with previous data
active_listings_trend <- 
  daily %>% 
  filter(housing, status != "B") %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 6)) %>% 
  filter(date >= "2016-01-01", date <= "2019-03-31") %>% 
  bind_rows(active_listings_trend)

# Listing differences
listing_difs <- 
  active_listings_trend %>% 
  filter(date >= "2019-07-01") %>% 
  mutate(growth_df = projected_growth - n,
         no_growth_df = projected_no_growth - n) %>% 
  summarize(avg_growth = mean(growth_df),
            avg_growth_pct = avg_growth / mean(n),
            avg_no_growth = mean(no_growth_df),
            avg_no_growth_pct = avg_no_growth / mean(n))

growth_dif <- 
  listing_difs %>% 
  pull(avg_growth) %>% 
  round(-1) %>% 
  prettyNum(",")

growth_dif_pct <- 
  listing_difs %>% 
  pull(avg_growth_pct) %>% 
  scales::percent(0.1)

no_growth_dif <- 
  listing_difs %>% 
  pull(avg_no_growth) %>% 
  round(-1) %>% 
  prettyNum(",")

no_growth_dif_pct <- 
  listing_difs %>% 
  pull(avg_no_growth_pct) %>% 
  scales::percent(0.1)

rm(property, daily, GH)
```

``` {r make_fig_3_2}

figure_3_2_fun <- function(regular = "", condensed = "") {
  
  active_listings_trend %>%
    pivot_longer(-date) %>% 
    filter(!is.na(value)) %>%
    ggplot() +
    geom_ribbon(aes(x = date, ymin = n, ymax = projected_no_growth, group = 1),
                data = filter(active_listings_trend, !is.na(projected_growth)), 
                fill = col_palette[6], alpha = 0.3) +
    geom_ribbon(aes(x = date, ymin = projected_no_growth, 
                    ymax = projected_growth, group = 1),
                data = filter(active_listings_trend, !is.na(projected_growth)), 
                fill = col_palette[3], alpha = 0.3) +
    geom_line(aes(date, value, color = name), lwd = 1.5) +
    scale_x_date(name = NULL) +
    scale_y_continuous(name = NULL, labels = scales::comma) +
    scale_color_manual(name = NULL, 
                       labels = c("Actual active listings", 
                                  "Expected with previous growth",
                                  "Expected with no growth"), 
                       values = col_palette[c(5, 1, 4)]) +
    theme_minimal() +
    theme(legend.position = "bottom", 
          panel.grid.minor.x = element_blank(),
          text = element_text(face = "plain", family = regular),
          legend.title = element_text(face = "bold", family = regular,
                                      size = 10),
          legend.text = element_text( size = 10, , family = regular))

}

if (build_figures) {
  ggsave(here("output", "figures", "figure_3_2.pdf"), 
         plot = figure_3_2_fun("Futura", "Futura Condensed"), 
         width = 8, height = 5, units = "in", useDingbats = FALSE)
  
  extrafont::embed_fonts(here("output", "figures", "figure_3_2.pdf"))
}

```

Trend analysis allows for a more precise estimate of the impact of regulation on active listings. Figure \@ref(fig:fig-3-2) compares the actual number of active listings with two scenarios for the listings which would have been expected based on pre-August-2018 trends. The higher, red line is a scenario where the growth rate of active listings from the previous two years continued into 2019. The lower, blue line is a scenario where aggregate growth in active listings stops, although seasonal variation continues. These two scenarios represent the plausible upper and lower bounds for what "natural" STR listing growth in Vancouver might have looked like in the absence of regulations. (As the subsequent section discusses, the continued-growth scenario is similar to Toronto's actual STR market trajectory, while the no-growth scenario is similar to Montreal's STR market trajectory.)

``` {r fig-3-2, include = TRUE, fig.cap = '(ref:fig-3-2)', fig.align = "center"}

figure_3_2_fun()

```

(ref:fig-3-2) _Actual and expected active listings after implementation of regulations_

What Figure \@ref(fig:fig-3-2) demonstrates is that, under either scenario, the City's regulations have had two different impacts on the number of active listings in Vancouver. The first is a one-time negative shock corresponding to Airbnb's mass listing removal, which has proven to be temporary. As of mid-2019, active listings had recovered to something close to their post-shock level. The second impact is a more durable shift downward in the STR listing growth curve. In the second half of 2019, the average difference between actual active listings and the two no-regulation counterfactuals was `r growth_dif` under the continued-growth scenario, and `r no_growth_dif` under the no-growth scenario. Our conclusion is therefore that the City's STR regulations have, in the long-term, resulted in between `r no_growth_dif` and `r growth_dif` fewer active listings in Vancouver's STR market each day. These numbers represent between `r no_growth_dif_pct` and `r growth_dif_pct` of the total number of active STRs in the city.

```{r commercial_trend, cache = TRUE, cache.lazy = FALSE, cache.extra = mtime(here("output", "str_processed.qsm"))}

qload(here("output", "str_processed.qsm"), nthreads = availableCores())

# Get commercial listings
commercial_listings <- 
  daily %>% 
  filter(status != "B", date >= "2015-01-01") %>% 
  mutate(commercial = if_else(FREH_3 < 0.5 & !multi, FALSE, TRUE)) %>% 
  count(date, commercial) %>% 
  ungroup()

# Get seasonal trend components
commercial_components <- 
  commercial_listings %>% 
  filter(commercial) %>% 
  select(-commercial) %>% 
  tsibble::as_tsibble() %>% 
  tsibble::index_by(yearmon = tsibble::yearmonth(date)) %>% 
  summarize(n = sum(n, na.rm = TRUE)) %>% 
  filter(yearmon >= tsibble::yearmonth("2015-01")) %>%
  filter(yearmon <= tsibble::yearmonth("2018-03")) %>%
  model(x11 = feasts:::X11(n, type = "additive")) %>% 
  components()

# Get linear trend from last two years
commercial_linear_coefficients <- 
  commercial_components %>% 
  filter(yearmon >= tsibble::yearmonth("2016-04")) %>% 
  mutate(id = 1:24) %>% 
  lm(trend ~ id, data = .) %>% 
  `$`("coefficients")

# Get seasonal component from April
commercial_seasonal <- 
  commercial_components %>% 
  filter(yearmon >= tsibble::yearmonth("2016-04")) %>% 
  mutate(month = lubridate::month(yearmon)) %>% 
  slice_tail(n = 12) %>% 
  as_tibble() %>% 
  select(month, seasonal)

# Set number of months to project out
months_to_project <- 21

# Build monthly projections
commercial_monthly_projection <-
  tibble(
    id = 24 + seq_len(months_to_project),
    yearmon = seq(tsibble::yearmonth("2018-04"), length.out = months_to_project, 
                  by = 1),
    month = lubridate::month(yearmon),
    trend_growth = 
      commercial_linear_coefficients[[1]] + id * commercial_linear_coefficients[[2]],
    trend_no_growth = 
      commercial_linear_coefficients[[1]] + 24 * commercial_linear_coefficients[[2]]
  ) %>% 
  left_join(commercial_seasonal, by = "month") %>% 
  mutate(projected_growth = trend_growth + seasonal,
         projected_no_growth = trend_no_growth + seasonal)

# Convert to daily values for month midpoints
commercial_daily_projection <-
  commercial_monthly_projection %>% 
  mutate(days = days_in_month(month),
         date = as.Date(yearmon) + 15,
         projected_growth = round(projected_growth / days),
         projected_no_growth = round(projected_no_growth / days)) %>% 
  select(date, projected_growth, projected_no_growth)

# Integrate into actual data
commercial_listings_trend <- 
  commercial_listings %>% 
  filter(commercial) %>% 
  select(-commercial) %>% 
  mutate(n = slide_dbl(n, mean, .before = 6)) %>% 
  filter(date >= "2016-01-01") %>% 
  left_join(commercial_daily_projection) %>% 
  mutate(projected_growth = if_else(date == "2018-04-01", n, projected_growth),
         projected_no_growth = if_else(date == "2018-04-01", 
                                       n, projected_no_growth)) %>%
  filter(date >= "2018-04-01", date <= "2019-12-16") %>%
  mutate(projected_growth = zoo::na.approx(projected_growth),
         projected_no_growth = zoo::na.approx(projected_no_growth))

# Rbind with previous data
commercial_listings_trend <- 
  commercial_listings %>% 
  filter(commercial) %>% 
  select(-commercial) %>% 
  mutate(n = slide_dbl(n, mean, .before = 6)) %>% 
  filter(date >= "2016-01-01", date <= "2019-03-31") %>% 
  bind_rows(commercial_listings_trend)

# Listing differences
com_listing_difs <- 
  commercial_listings_trend %>% 
  filter(date >= "2019-07-01") %>% 
  mutate(growth_df = projected_growth - n,
         no_growth_df = projected_no_growth - n) %>% 
  summarize(avg_growth = mean(growth_df),
            avg_growth_pct = avg_growth / mean(n),
            avg_no_growth = mean(no_growth_df),
            avg_no_growth_pct = avg_no_growth / mean(n))

com_growth_dif <- 
  com_listing_difs %>% 
  pull(avg_growth) %>% 
  round(-1) %>% 
  prettyNum(",")

com_growth_dif_pct <- 
  com_listing_difs %>% 
  pull(avg_growth_pct) %>% 
  scales::percent(0.1)

com_no_growth_dif <- 
  com_listing_difs %>% 
  pull(avg_no_growth) %>% 
  round(-1) %>% 
  prettyNum(",")

com_no_growth_dif_pct <- 
  com_listing_difs %>% 
  pull(avg_no_growth_pct) %>% 
  scales::percent(0.1)

# Commercial properties removed
taken_down_properties <- 
  property %>% 
  st_drop_geometry() %>% 
  filter(scraped >= "2018-08-23", scraped <= "2018-08-31") %>% 
  pull(property_ID)

commercial_pct_removed <- 
  {{
    daily %>% 
      filter(housing, 
             property_ID %in% taken_down_properties,
             date >= key_date_regulations,
             FREH_3 >= 0.5 | multi) %>% 
      distinct(property_ID) %>% 
      nrow()
    } / {
      commercial_listings %>% 
        filter(date == key_date_regulations, commercial) %>% 
        pull(n)
      }} %>% 
  scales::percent(0.1)

# Peak commercial listings in 2019
peak_2019_commercial <- 
  commercial_listings %>% 
  filter(commercial, date >= "2019-01-01", date <= "2019-12-31") %>% 
  filter(n == max(n)) %>% 
  pull(n) %>% 
  round(-1) %>% 
  prettyNum(",")

rm(property, daily, GH)

```

``` {r make_fig_3_3}

figure_3_3_fun <- function(regular = "", condensed = "") {
  
  commercial_listings %>% 
    group_by(commercial) %>% 
    mutate(n = slide_dbl(n, mean, .before = 6)) %>% 
    ungroup() %>% 
    filter(date >= "2016-01-01") %>% 
    ggplot() +
    geom_line(aes(date, n, color = commercial), lwd = 1.5) +
    annotate("segment", x = key_date_covid, xend = key_date_covid,
             y = -Inf, yend = Inf, alpha = 0.3) +
    annotate("segment", x = key_date_regulations, xend = key_date_regulations,
             y = -Inf, yend = Inf, alpha = 0.3) +
    scale_x_date(name = NULL, limits = c(as.Date("2016-01-01"), NA)) +
    scale_y_continuous(name = NULL) +
    scale_colour_manual(name = "Listing type",
                        values = col_palette[c(5, 1)],
                        labels = c("Non-commercial", "Commercial")) +
    theme_minimal() +
    theme(legend.position = "bottom",
          panel.grid.minor.x = element_blank(),
          text = element_text(family = regular, face = "plain"),
          legend.title = element_text(family = regular, face = "bold"),
          legend.text = element_text(family = regular))
}

if (build_figures) {
  ggsave(here("output", "figures", "figure_3_3.pdf"), 
         plot = figure_3_3_fun("Futura", "Futura Condensed"), 
         width = 8, height = 5, units = "in", useDingbats = FALSE)
  
  extrafont::embed_fonts(here("output", "figures", "figure_3_3.pdf"))
}

```

Since the 2018 regulations do not prohibit short-term rentals but merely limit them to hosts' principal residences, the fact that active listings in Vancouver have been significantly reduced by the regulations is not on its own decisive evidence of the effectiveness of the regulations. A harder to measure—but arguably more important—metric is the number of commercial STRs operating in Vancouver, given that they are necessarily non-compliant with the City's regulations. Figure \@ref(fig:fig-3-3) decomposes the trajectory of active listings shown above (in Figure \@ref(fig:fig-3-1)) into commercial and non-commercial listings. The former are all listings which are either frequently rented entire-home (FREH) listings or multilistings. The graph shows that non-commercial listings experienced a noticable drop when Airbnb carried out its August 2018 mass listing removal, but that the number of these listings was already in decline. The quantity of commercial listings, meanwhile, experienced a much sharper drop in August 2018 (`r commercial_pct_removed` of all commercial listings were removed by Airbnb) and continued to decline for the rest of 2018. Commercial operations recovered throughout 2019, however, and reached a new all-time high (`r peak_2019_commercial`) by the end of 2019.

``` {r fig-3-3, include = TRUE, fig.cap = '(ref:fig-3-3)', fig.align = "center"}

figure_3_3_fun()

```

(ref:fig-3-3) _Non-commercial and commercial active daily listings in Vancouver (7-day average)_

``` {r make_fig_3_4}

figure_3_4_fun <- function(regular = "", condensed = "") {
  
  commercial_listings_trend %>%
    pivot_longer(-date) %>% 
    filter(!is.na(value)) %>%
    ggplot() +
    geom_ribbon(aes(x = date, ymin = n, ymax = projected_no_growth, group = 1),
                data = filter(commercial_listings_trend, !is.na(projected_growth)), 
                fill = col_palette[6], alpha = 0.3) +
    geom_ribbon(aes(x = date, ymin = projected_no_growth, 
                    ymax = projected_growth, group = 1),
                data = filter(commercial_listings_trend, !is.na(projected_growth)), 
                fill = col_palette[3], alpha = 0.3) +
    geom_line(aes(date, value, color = name), lwd = 1.5) +
    scale_x_date(name = NULL) +
    scale_y_continuous(name = NULL, labels = scales::comma) +
    scale_color_manual(name = NULL, 
                       labels = c("Actual commercial listings", 
                                  "Expected with previous growth",
                                  "Expected with no growth"), 
                       values = col_palette[c(5, 1, 4)]) +
    theme_minimal() +
    theme(legend.position = "bottom", 
          panel.grid.minor.x = element_blank(),
          text = element_text(face = "plain", family = regular),
          legend.title = element_text(face = "bold", family = regular,
                                      size = 10),
          legend.text = element_text( size = 10, , family = regular))

}

if (build_figures) {
  ggsave(here("output", "figures", "figure_3_4.pdf"), 
         plot = figure_3_4_fun("Futura", "Futura Condensed"), 
         width = 8, height = 5, units = "in", useDingbats = FALSE)
  
  extrafont::embed_fonts(here("output", "figures", "figure_3_4.pdf"))
}

```

Figure \@ref(fig:fig-3-4) offers a closer look at how the actual number of commercial listings compares with two scenarios where the mid-2018 regulations are not enacted: a growth-as-usual scenario where the growth trend from the previous two years continues, and a no-growth scenario where commercial growth had stopped by the time that the City's regulations were enacted. Unlike the trend analysis of all active listings, above, where under both scenarios the regulations are likely to have substantially reduced the number of daily active listings, the effect of the City's regulations on commercial listings is highly sensitive to the scenario chosen. In the second half of 2019, the average difference between actual commercial listings and the two no-regulation counterfactuals was `r com_growth_dif` under the continued-growth scenario, and `r com_no_growth_dif` under the no-growth scenario. This is an enormous, twelve-fold difference. Under the assumption that commercial listing growth would have continued on its pre-regulation trend, we estimate that regulations have reduced the number of commercial operators by `r com_growth_dif_pct`. But under the assumption that commercial listing growth had leveled off when the regulations were introduced, we estimate that the City's regulations have only reduced the number of commercial operators by `r com_no_growth_dif_pct`.

To be clear, however, the correct value for the "actual commercial listings" line in Figure \@ref(fig:fig-3-4) should be zero, given that all non-principal-residence STRs are forbidden under Vancouver's regulations. Even allowing for some error in the measurement of commercial operators, at the end of 2019 there were almost certainly 2,500 or more listings operating in violation of the City's principal residence rules.

``` {r fig-3-4, include = TRUE, fig.cap = '(ref:fig-3-4)', fig.align = "center"}

figure_3_4_fun()

```

(ref:fig-3-4) _Actual and expected commercial listings after implementation of regulations_

## The City of Vancouver in comparison with Montreal and Toronto

```{r montreal_toronto, cache = TRUE, cache.lazy = FALSE, cache.extra = mtime(here("output", "cma_comparison.qsm"))}

qload(here("output", "str_processed.qsm"), nthreads = availableCores())
qload(here("output", "cma_comparison.qsm"), nthreads = availableCores())

active_montreal <- 
  daily_montreal %>% 
  filter(housing, status != "B") %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 13)) %>% 
  mutate(city = "Montreal",
         type = "active")

active_toronto <- 
  daily_toronto %>% 
  filter(housing, status != "B") %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 13)) %>% 
  mutate(city = "Toronto",
         type = "active")

active_vancouver <- 
  daily %>% 
  filter(housing, status != "B") %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 13)) %>% 
  mutate(city = "Vancouver",
         type = "active")

commercial_montreal <- 
  daily_montreal %>% 
  filter(housing, status != "B", (FREH_3 >= 0.5 | multi)) %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 13)) %>% 
  mutate(city = "Montreal",
         type = "commercial")

commercial_toronto <- 
  daily_toronto %>% 
  filter(housing, status != "B", (FREH_3 >= 0.5 | multi)) %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 13)) %>% 
  mutate(city = "Toronto",
         type = "commercial")

commercial_vancouver <- 
  daily %>% 
  filter(housing, status != "B", (FREH_3 >= 0.5 | multi)) %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 13)) %>% 
  mutate(city = "Vancouver",
         type = "commercial")

multi_montreal <- 
  daily_montreal %>% 
  filter(housing, status != "B", multi) %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 13)) %>% 
  mutate(city = "Montreal",
         type = "multi")

multi_toronto <- 
  daily_toronto %>% 
  filter(housing, status != "B", multi) %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 13)) %>% 
  mutate(city = "Toronto",
         type = "multi")

multi_vancouver <- 
  daily %>% 
  filter(housing, status != "B", multi) %>% 
  count(date) %>% 
  mutate(n = slide_dbl(n, mean, .before = 13)) %>% 
  mutate(city = "Vancouver",
         type = "multi")

FREH_montreal <- 
  daily_montreal %>% 
  filter(housing, status != "B") %>% 
  group_by(date) %>% 
  summarize(n = sum(FREH_3, na.rm = TRUE)) %>% 
  mutate(n = slide_dbl(n, mean, .before = 20)) %>% 
  mutate(city = "Montreal",
         type = "FREH")

FREH_toronto <- 
  daily_toronto %>% 
  filter(housing, status != "B") %>% 
  group_by(date) %>% 
  summarize(n = sum(FREH_3, na.rm = TRUE)) %>% 
  mutate(n = slide_dbl(n, mean, .before = 20)) %>% 
  mutate(city = "Toronto",
         type = "FREH")

FREH_vancouver <- 
  daily %>% 
  filter(housing, status != "B") %>% 
  group_by(date) %>% 
  summarize(n = sum(FREH_3, na.rm = TRUE)) %>% 
  mutate(n = slide_dbl(n, mean, .before = 20)) %>% 
  mutate(city = "Vancouver",
         type = "FREH")

rm(property_montreal, property_toronto, property, daily, daily_montreal, 
   daily_toronto, property_montreal_other, property_toronto_other,
   daily_montreal_other, daily_toronto_other, GH)

```

The preceding analysis varies significantly with the underlying assumptions being made about the growth of Vancouver's STR market prior to the introduction of the City's regulations. If we assume that growth would have continued along its previous trajectory, then the regulations have had a major impact on the number of active listings, and in particular on the number of commercial operations. If growth were already leveling off prior to the introduction of the regulations, by contrast, then it is likely that the regulations have somewhat reduced the number of active listings, but have been ineffective at targeting the commercial operations which are not permitted under the rules.

There is no way to determine with certainty which of these scenarios would have occurred, but a promising strategy is to compare Vancouver with a set of similar jurisdictions which did not regulate their STR markets in mid-2018. In what follows we do this at multiple spatial scales, beginning with the other two largest STR markets in the country: Toronto and Montreal. The City of Toronto has recently implemented mandatory host registration and a principal-residence requirement which are very similar to Vancouver's rules, but these were not active during the study period. The City of Montreal has rules which vary across the city, but in the key central-city boroughs commercial short-term rentals are largely forbidden. However, with no registration system in place during the study period, it has been widely understood that Montreal's enforcement mechanisms have not been sufficiently strong to significantly affect the operation of commercial STRs. Toronto and Montreal thus represent zero- or low-regulation cases with which to compare Vancouver.

```{r montreal_toronto_comparisons, cache = TRUE, cache.lazy = FALSE}

van_mtl_active_dif_2017 <- 
  bind_rows(active_montreal, active_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2017-01-01", date <= "2017-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Montreal"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

van_mtl_active_dif_2019 <- 
  bind_rows(active_montreal, active_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2019-07-01", date <= "2019-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Montreal"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

van_to_active_dif_2017 <- 
  bind_rows(active_toronto, active_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2017-01-01", date <= "2017-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Toronto"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

van_to_active_dif_2019 <- 
  bind_rows(active_toronto, active_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2019-07-01", date <= "2019-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Toronto"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

van_to_FREH_dif_2017 <- 
  bind_rows(FREH_toronto, FREH_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2017-01-01", date <= "2017-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Toronto"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

van_mtl_FREH_dif_2017 <- 
  bind_rows(FREH_montreal, FREH_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2017-01-01", date <= "2017-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Montreal"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

van_to_FREH_dif_2019 <- 
  bind_rows(FREH_toronto, FREH_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2019-07-01", date <= "2019-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Toronto"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

van_mtl_FREH_dif_2019 <- 
  bind_rows(FREH_montreal, FREH_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2019-07-01", date <= "2019-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Montreal"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

van_to_multi_dif_2017 <- 
  bind_rows(multi_toronto, multi_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2017-01-01", date <= "2017-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Toronto"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

van_mtl_multi_dif_2017 <- 
  bind_rows(multi_montreal, multi_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2017-01-01", date <= "2017-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Montreal"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

van_to_multi_dif_2019 <- 
  bind_rows(multi_toronto, multi_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2019-07-01", date <= "2019-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Toronto"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

van_mtl_multi_dif_2019 <- 
  bind_rows(multi_montreal, multi_vancouver) %>% 
  group_by(city) %>% 
  mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
  ungroup() %>% 
  filter(date >= "2019-07-01", date <= "2019-12-31") %>% 
  group_by(date) %>% 
  summarize(dif = index[city == "Montreal"] / index[city == "Vancouver"]) %>% 
  summarize(dif = mean(dif) - 1) %>% 
  pull(dif) %>% 
  scales::percent(0.1)

```

``` {r make_fig_3_5}

figure_3_5_fun <- function(regular = "", condensed = "") {
  
  bind_rows(active_montreal, active_toronto, active_vancouver,
            FREH_montreal, FREH_toronto, FREH_vancouver,
            multi_montreal, multi_toronto, multi_vancouver) %>% 
    filter(date >= "2016-07-01", date <= "2019-12-31") %>% 
    group_by(city, type) %>% 
    mutate(index = 100 * n / n[date == "2017-01-01"]) %>% 
    ungroup() %>% 
    mutate(type = case_when(
      type == "active" ~ "Active listings", 
      type == "commercial" ~ "Commercial listings",
      type == "FREH" ~ "FREH listings",
      type == "multi" ~ "Multilistings")) %>% 
    ggplot(aes(date, index, colour = city, size = city)) +
    geom_line() +
    scale_y_continuous(name = NULL, label = scales::comma) +
    scale_x_date(name = NULL, limits = c(as.Date("2016-07-01"), NA)) +
    scale_colour_manual(name = NULL, 
                        values = col_palette[c(3, 6, 5)],
                        guide = guide_legend(override.aes = list(
                          size = c(0.5, 0.5, 1)))) +
    scale_size_manual(values = c("Vancouver" = 1, "Montreal" = 0.5,
                                 "Toronto" = 0.5), guide = "none") + 
    facet_wrap(vars(type), nrow = 1) +
    theme_minimal() +
    theme(legend.position = "bottom", 
          panel.grid.minor.x = element_blank(),
          text = element_text(face = "plain", family = regular),
          legend.title = element_text(face = "bold", family = regular, 
                                      size = 10),
          legend.text = element_text(size = 10, family = regular),
          strip.text = element_text(face = "bold", family = regular, size = 10))

}

if (build_figures) {
  ggsave(here("output", "figures", "figure_3_5.pdf"), 
         plot = figure_3_5_fun("Futura", "Futura Condensed"), 
         width = 8, height = 5, units = "in", useDingbats = FALSE)
  
  extrafont::embed_fonts(here("output", "figures", "figure_3_5.pdf"))
}

```

Figure \@ref(fig:fig-3-5) compares the active listing (left), FREH listing (middle), and multilisting (right) trajectories in Montreal, Toronto and Vancouver. (Commercial listings are disaggregated into FREH listings and multilistings in order to clarify the key patterns.) The figure lends significant weight to the conclusion that Vancouver's STR regulations have significantly reduced the commercial portion of the STR market. The left panel demonstrates that the growth trajectory of active listings in Vancouver was on a very similar trajectory to Montreal and Toronto prior to 2018. In 2018 the three cities diverged, with listings in Vancouver plummeting in response to the new registration system, listings in Toronto continuing to grow quickly, and listings in Montreal beginning a long period of stagnation and decline. By the end of 2019 Vancouver's active listings had caught up to Montreal's in relative terms (in both cases with total numbers similar to the beginning of 2017), but were far behind Toronto's, which grew by more than 50% from 2017 through 2019. Montreal was the first Canadian city to have a large STR market, driven by a combination of strong tourism and cheap housing (which incentivized conversions to STRs), and it has followed a trajectory comparable to other large tourist destinations—early growth then stagnation. Toronto and Vancouver began their periods of growth somewhat later, probably due in large to much higher housing prices. Toronto thus represents the most likely counterfactual for how Vancouver's STR market would have evolved in the absence of regulations. Over the second half of 2019, Toronto had on average `r van_to_active_dif_2019` more active listings than Vancouver, relative to each city's market size on January 1, 2017. In 2017, by contrast, the difference was only `r van_to_active_dif_2017`. This tends to support the higher end of our `r substr(no_growth_dif_pct, 1, 4)`-`r growth_dif_pct` estimate for the impact of the City of Vancouver's regulations on the number of active STR listings.

``` {r fig-3-5, include = TRUE, fig.cap = '(ref:fig-3-5)', fig.align = "center"}

figure_3_5_fun()

```

(ref:fig-3-5) _Active listings (L), FREH listings (C), and multilistings (R) in Montreal, Toronto and Vancouver (2017-01-01 = 100)_

The divergence between Vancouver and Montreal and Toronto is even more significant with respect to commercial listings, which were prohibited by Vancouver's regulations but were either de jure (Toronto) or de facto (Montreal) permitted in the other cases. The center and right panels of Figure \@ref(fig:fig-3-5) show, respectively, the trajectory of FREH listings and multilistings in the three cities. In both cases the three cities were on highly similar growth trajectories through 2017. Montreal's FREH listings were growing at a `r van_mtl_FREH_dif_2017` higher rate than Vancouver, while Toronto's FREH growth rate was identical to Vancouver's. Montreal's multilistings were growing at a `r van_mtl_multi_dif_2017` higher rate than Vancouver, while Toronto's were growing `r van_to_FREH_dif_2017` faster. In the second half of 2019, by which point the temporary impacts of Airbnb's mass listing removal in Vancouver would have subsided, the commercial side of Vancouver's market looked dramatically different from either Montreal or Toronto. Montreal's FREH listings had grown `r van_mtl_FREH_dif_2019` faster than Vancouver's, while Toronto's had grown an incredible `r van_to_FREH_dif_2019` faster. The numbers are similar for multilistings: Montreal outpaced Vancouver by `r van_mtl_multi_dif_2019`, and Toronto outpaced Vancouver by `r van_to_multi_dif_2019`.

These differences are summarized in Table \@ref(tab:tab-MTV). They strongly support the conclusion that the City of Vancouver's regulations have durably reduced the commercial part of Vancouver's STR market. Our "growth-as-usual" counterfactual had suggested that the regulations might have reduced commercial operators by `r com_growth_dif_pct`. Comparison with Montreal and Toronto adds additional evidence suggesting that this estimate is plausible.

``` {r tab-MTV, include = TRUE}

library(kableExtra)

tibble(
  City = c("Montreal", "", "Toronto", ""),
  Year = c("2017", "2019 (2H)", "2017", "2019 (2H)"),
  "Active listings" = c(van_mtl_active_dif_2017, van_mtl_active_dif_2019,
                        van_to_active_dif_2017, van_to_active_dif_2019),
  "FREH listings" = c(van_mtl_FREH_dif_2017, van_mtl_FREH_dif_2019,
                      van_to_multi_dif_2017, van_to_FREH_dif_2019),
  "Multilistings" = c(van_mtl_multi_dif_2017, van_mtl_multi_dif_2019,
                      van_to_FREH_dif_2017, van_to_multi_dif_2019)) %>% 
  kbl(caption = "Montreal and Toronto listing trajectories in comparison with Vancouver (values are the growth rates from 1 January 2017 relative to Vancouver's growth rates in the same time period)", 
      align = "llrrr") %>% 
  kable_styling()

```


## The City of Vancouver in comparison with the rest of the Vancouver region

In 2019 there was an average of 4,420 active daily listings operated by an average of 2,830 hosts. These hosts collectively earned $77.3 million in 2019—an average of $17,500 per daily active listing or $27,300 per active host. Compared to the average host revenue in the City of Vancouver ($TKTK), hosts in the rest of the CMA earn significantly less than in the City of Vancouver.

In terms of active listings growth, the CMA saw a 21.9% increase of active listings between 2018 and 2019. While the City of Vancouver’s daily active listings decreased by TKTK% during the year, the CMA’s STR market has been growing. However, both markets have had declining rates of growth from 2016 onwards, with the exception of a noticeable increase in daily active listings at the end of 2019 and beginning of 2020, which sharply vanished in light of the pandemic.

STR activity in the CMA of Vancouver is mostly concentrated in the census subdivisions (CSD) of Richmond, Burnaby and Surrey. Richmond and Burnaby both represent around 20% of all daily active listings in the CMA, with similar shares of revenues. The growth rate of these two census subdivisions is 29.0% and 22.9%, respectively. While Surrey has less daily active listings than the first two CSDs, its active listings growth is 26.9%, and its revenue growth, 45.0%. This above-average growth in neighbouring regions might be a migration of the growth of STR activity in CSDs that are not subject to regulations.

One method of looking at the impact of the regulations on the STR market is to look at the variation in the number of daily active listings in the two geographies. Figure 3.4.1 shows the growth in the number of daily active listings, with the end of August 2018 indexed at 100, date of Airbnb’s massive listing removal. This indexed comparison is useful to compare two markets of different sizes to see the underlying patterns as well as the inherent differences. The regulations had a strong impact on the number of daily active listings within the City of Vancouver, while causing close to no impact on the daily active listings in the CMA. The CMA’s number of daily active listings decreases slightly after the pass of the regulation, but is consistent with the seasonality observable in every STR market. 

Figure 3.4.2 is showing the sum of daily revenue, using a rolling window of 7 days. Both groups follow a similar pattern. There is a sharp decrease after the regulation, which can be attributed to seasonality. However, while the City of Vancouver has had a decrease in revenue in the summer following the regulations, the CMA’s revenue grew significantly. In Vancouver, revenue grew by 5.2% in 2019, compared to 2018. In the rest of the CMA, revenue grew by 35.0%. Revenue follows seasonality trends, but the CMA’s revenue growth is constantly higher than the City of Vancouver starting the following summer after the regulations, which had not been the case prior to the regulation. On the other hand, however, the City of Vancouver has never reached daily revenue levels from before the regulation. Regulation could have ultimately inhibited revenue growth inside the City of Vancouver?

We can analyze whether the regulations have caused commercial listings to decline within the City of Vancouver, and if a growth in the rest of the CMA occurred to replace it. The following graph shows the variation in commercial listings (combining both FREH and multilistings) for these two geographies. The number of commercial listings in the CMA has decreased in a seasonal manner after the regulations, while the numbers in the City of Vancouver substantially decreased due to Airbnb’s mass removal, which lead to the discrepancy between both lines. A year later, the city’s number came back to before the regulations’ number, while the CMA’s numbers increased significantly. More growth in commercial operations occurred outside of the City, while the City has only reached but not surpassed the previous peaks.

## The eastern edge of the City of Vancouver in comparison with the western edge of the City of Burnaby

We also conducted a comparative analysis between two sets of homogeneous listings: the first is a 1-kilometer buffer on the eastern side of the City of Vancouver, and the second is a 1-kilometer buffer on the western side of Burnaby. The following section will summarize the conclusions of this analysis in order to inform on the impact of STR regulations for STR listings. 

Figure 3.5.1 highlights that, despite being two fairly homogenous geographies, the Burnaby buffer has been experiencing greater growth in its number of active listings in 2019 and faced virtually no seasonal decrease, while the City of Vancouver faced one. In the long run, a significant share of the new growth has been occurring outside city boundaries, which is consistent with a regulation causing STR operations to refrain from partaking in STR activities inside the City, and rather operate in Burnaby. The number of active daily listings constantly grew in Burnaby even before regulations, compared to the City of Vancouver where it remained more stable.

However, more active daily listings does not mean more reservations. More people could make them available, without any new demand occurring. One way to determine this is to look at total daily revenue. While there are relatively greater numbers in the number of active daily listings in the Burnaby buffer, both sides of the border faced the same variation in total daily revenue with a few exceptions only. The growth in active listings in the Burnaby buffer did not lead to a relatively significant increase in the total revenue. The following figures TKTK and TKTK show the total daily revenue and the available and reserved listings for the Vancouver and the Burnaby buffers, indexed.

Number of available daily listings grew substantially stronger in Burnaby’s than in the City’s buffer, but reservations numbers are very similar. Most likely to avoid regulations, new STR operations have moved to the outskirts of the city, while the demand has not changed in any way on both sides of the border. This has led to an increase in the supply of listings outside the City of Vancouver, without a subsequent increase in demand (illustrated by the similar levels of daily revenues and reserved listings). 

Now that we know revenues have remained steady and that there has been a relative decrease but an absolute increase in the number of active listings, what were both relative and absolute impacts of the regulations on the prices of STR in the City of Vancouver? As the following graph indicates, relative variation in prices is quite similar. The summer of 2019, a year following the regulations, the average nightly prices in the City of Vancouver were quite higher than a year before (from around the index of 100 to 125). It highlights a price increase which could be a result of the regulations: the burden of the new tax could have been partly transferred to consumers, who are faced with elastic demand, as evidenced by the steady demand indicated above. However, when in relation to the Burnaby side of the border, there was a similar increase in average nightly prices in the summer of 2019. 

The restrictions in Vancouver might have motivated STR hosts outside the city borders to start operating STRs commercially. When comparing properties on both sides of the border, we can see that there has been more growth in commercial listings in Burnaby (with unprecedented peaks in the summer and winter of 2019), but that commercial properties on the Vancouver side have also increased. 
